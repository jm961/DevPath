---
import Loader from '../Loader.astro';
import ModernRoadmap from '../ModernRoadmap/ModernRoadmap.astro';
import './FrameRenderer.css';

export interface Props {
  resourceType: 'roadmap' | 'best-practice';
  resourceId: string;
  jsonUrl: string;
  dimensions?: {
    width: number;
    height: number;
  };
  useModernRenderer?: boolean;
}

const {
  resourceId,
  resourceType,
  jsonUrl,
  dimensions = null,
  useModernRenderer = true,
} = Astro.props;
---

{
  useModernRenderer ? (
    <ModernRoadmap
      resourceType={resourceType}
      resourceId={resourceId}
      jsonUrl={jsonUrl}
      dimensions={dimensions}
    />
  ) : (
    <div
      id='resource-svg-wrap'
      class='roadmap-container'
      style={
        dimensions
          ? `--aspect-ratio:${dimensions.width}/${dimensions.height}`
          : null
      }
      data-resource-type={resourceType}
      data-resource-id={resourceId}
      data-json-url={jsonUrl}
    >
      <div id='resource-loader' class='roadmap-loader'>
        <Loader />
      </div>
    </div>
  )
}

{!useModernRenderer && <script src='./renderer.js' />}
