---
import type { GuideFileType } from '../lib/guide';
import Icon from './AstroIcon.astro';

export interface Props {
  guide: GuideFileType;
  guideId: string;
}

const { guide, guideId } = Astro.props;
const { frontmatter } = guide;
const { author } = frontmatter;
---

<div class='relative border-b border-white/5 bg-gradient-to-b from-surface/50 to-transparent'>
  <div class='container relative py-8 sm:py-16'>
    
    <!-- Breadcrumb navigation -->
    <nav class='mb-6 flex items-center gap-2 text-sm' aria-label='Breadcrumb'>
      <a href='/guides' class='text-muted transition-colors hover:text-primary'>
        All Guides
      </a>
      <svg class='h-4 w-4 text-muted' fill='none' stroke='currentColor' viewBox='0 0 24 24'>
        <path stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M9 5l7 7-7 7'></path>
      </svg>
      <span class='font-medium text-white'>{frontmatter.title}</span>
    </nav>

    <!-- Title and metadata -->
    <div class='mb-6 sm:mb-8'>
      <div class='mb-4 flex flex-wrap items-center gap-3'>
        <span class='inline-flex items-center gap-1.5 rounded-full bg-primary/10 px-2.5 py-0.5 text-xs font-semibold text-primary ring-1 ring-primary/20'>
          <div class='h-1.5 w-1.5 rounded-full bg-primary'></div>
          <span class='capitalize'>{frontmatter.type} Guide</span>
        </span>
        
        <a
          href={author.url}
          target='_blank'
          class='inline-flex items-center gap-2 text-xs text-muted transition-colors hover:text-white'
        >
          <img
            alt={author.name}
            src={author.imageUrl}
            class='h-5 w-5 rounded-full ring-2 ring-white/10'
          />
          <span>by {author.name}</span>
        </a>
      </div>
      
      <h1 class='mb-3 text-3xl font-black leading-tight text-white sm:text-5xl lg:text-6xl'>
        {frontmatter.title}
      </h1>
      <p class='max-w-3xl text-base text-muted sm:text-lg'>{frontmatter.description}</p>
    </div>

    <!-- Actions -->
    <div class='flex flex-wrap items-center gap-2 sm:gap-3'>
      <a
        href={`/feedback?url=${encodeURIComponent(`/guides/${guideId}`)}&type=suggestion`}
        class='btn-ghost inline-flex items-center justify-center gap-2 rounded-xl px-4 py-2.5 text-sm font-medium'
        aria-label='Improve this Guide'
      >
        <Icon icon='comment' class='h-4 w-4' />
        <span class='hidden sm:inline'>Improve this Guide</span>
        <span class='inline sm:hidden'>Improve</span>
      </a>
    </div>
  </div>
</div>
