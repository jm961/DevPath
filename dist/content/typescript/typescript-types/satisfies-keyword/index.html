<!DOCTYPE html><link href=/_astro/_...topicId_.bad8bb91.css rel=stylesheet /><main class=prose-custom id=main-content><h1 id=satisfies-keyword>satisfies Keyword</h1><p>TypeScript developers are often faced with a dilemma: we want to ensure that some expression matches some type, but also want to keep the most specific type of that expression for inference purposes.</p><p>For example:</p><pre class="astro-code dracula" is:raw="" style=background-color:#282a36;overflow-x:auto tabindex=0><code><span class=line><span style=color:#6272a4>// Each property can be a string or an RGB tuple.</span></span>
<span class=line><span style=color:#ff79c6>const</span><span style=color:#f8f8f2> palette </span><span style=color:#ff79c6>=</span><span style=color:#f8f8f2> {</span></span>
<span class=line><span style=color:#f8f8f2>  red</span><span style=color:#ff79c6>:</span><span style=color:#f8f8f2> [</span><span style=color:#bd93f9>255</span><span style=color:#f8f8f2>, </span><span style=color:#bd93f9>0</span><span style=color:#f8f8f2>, </span><span style=color:#bd93f9>0</span><span style=color:#f8f8f2>],</span></span>
<span class=line><span style=color:#f8f8f2>  green</span><span style=color:#ff79c6>:</span><span style=color:#f8f8f2> </span><span style=color:#e9f284>'</span><span style=color:#f1fa8c>#00ff00</span><span style=color:#e9f284>'</span><span style=color:#f8f8f2>,</span></span>
<span class=line><span style=color:#f8f8f2>  bleu</span><span style=color:#ff79c6>:</span><span style=color:#f8f8f2> [</span><span style=color:#bd93f9>0</span><span style=color:#f8f8f2>, </span><span style=color:#bd93f9>0</span><span style=color:#f8f8f2>, </span><span style=color:#bd93f9>255</span><span style=color:#f8f8f2>],</span></span>
<span class=line><span style=color:#f8f8f2>  </span><span style=color:#6272a4>//  ^^^^ sacrebleu - we've made a typo!</span></span>
<span class=line><span style=color:#f8f8f2>};</span></span>
<span class=line></span>
<span class=line><span style=color:#6272a4>// We want to be able to use array methods on 'red'...</span></span>
<span class=line><span style=color:#ff79c6>const</span><span style=color:#f8f8f2> redComponent </span><span style=color:#ff79c6>=</span><span style=color:#f8f8f2> palette.red.</span><span style=color:#50fa7b>at</span><span style=color:#f8f8f2>(</span><span style=color:#bd93f9>0</span><span style=color:#f8f8f2>);</span></span>
<span class=line></span>
<span class=line><span style=color:#6272a4>// or string methods on 'green'...</span></span>
<span class=line><span style=color:#ff79c6>const</span><span style=color:#f8f8f2> greenNormalized </span><span style=color:#ff79c6>=</span><span style=color:#f8f8f2> palette.green.</span><span style=color:#50fa7b>toUpperCase</span><span style=color:#f8f8f2>();</span></span></code></pre><p>Notice that we’ve written <code>bleu</code>, whereas we probably should have written <code>blue</code>. We could try to catch that <code>bleu</code> typo by using a type annotation on palette, but we’d lose the information about each property.</p><pre class="astro-code dracula" is:raw="" style=background-color:#282a36;overflow-x:auto tabindex=0><code><span class=line><span style=color:#ff79c6>type</span><span style=color:#f8f8f2> </span><span style=color:#8be9fd;font-style:italic>Colors</span><span style=color:#f8f8f2> </span><span style=color:#ff79c6>=</span><span style=color:#f8f8f2> </span><span style=color:#e9f284>'</span><span style=color:#f1fa8c>red</span><span style=color:#e9f284>'</span><span style=color:#f8f8f2> </span><span style=color:#ff79c6>|</span><span style=color:#f8f8f2> </span><span style=color:#e9f284>'</span><span style=color:#f1fa8c>green</span><span style=color:#e9f284>'</span><span style=color:#f8f8f2> </span><span style=color:#ff79c6>|</span><span style=color:#f8f8f2> </span><span style=color:#e9f284>'</span><span style=color:#f1fa8c>blue</span><span style=color:#e9f284>'</span><span style=color:#f8f8f2>;</span></span>
<span class=line><span style=color:#ff79c6>type</span><span style=color:#f8f8f2> </span><span style=color:#8be9fd;font-style:italic>RGB</span><span style=color:#f8f8f2> </span><span style=color:#ff79c6>=</span><span style=color:#f8f8f2> [red: </span><span style=color:#8be9fd;font-style:italic>number</span><span style=color:#f8f8f2>, green: </span><span style=color:#8be9fd;font-style:italic>number</span><span style=color:#f8f8f2>, blue: </span><span style=color:#8be9fd;font-style:italic>number</span><span style=color:#f8f8f2>];</span></span>
<span class=line></span>
<span class=line><span style=color:#ff79c6>const</span><span style=color:#f8f8f2> palette</span><span style=color:#ff79c6>:</span><span style=color:#f8f8f2> </span><span style=color:#8be9fd;font-style:italic>Record</span><span style=color:#f8f8f2>&#x3C;</span><span style=color:#ffb86c;font-style:italic>Colors</span><span style=color:#f8f8f2>, </span><span style=color:#8be9fd;font-style:italic>string</span><span style=color:#f8f8f2> </span><span style=color:#ff79c6>|</span><span style=color:#f8f8f2> </span><span style=color:#ffb86c;font-style:italic>RGB</span><span style=color:#f8f8f2>> </span><span style=color:#ff79c6>=</span><span style=color:#f8f8f2> {</span></span>
<span class=line><span style=color:#f8f8f2>  red</span><span style=color:#ff79c6>:</span><span style=color:#f8f8f2> [</span><span style=color:#bd93f9>255</span><span style=color:#f8f8f2>, </span><span style=color:#bd93f9>0</span><span style=color:#f8f8f2>, </span><span style=color:#bd93f9>0</span><span style=color:#f8f8f2>],</span></span>
<span class=line><span style=color:#f8f8f2>  green</span><span style=color:#ff79c6>:</span><span style=color:#f8f8f2> </span><span style=color:#e9f284>'</span><span style=color:#f1fa8c>#00ff00</span><span style=color:#e9f284>'</span><span style=color:#f8f8f2>,</span></span>
<span class=line><span style=color:#f8f8f2>  bleu</span><span style=color:#ff79c6>:</span><span style=color:#f8f8f2> [</span><span style=color:#bd93f9>0</span><span style=color:#f8f8f2>, </span><span style=color:#bd93f9>0</span><span style=color:#f8f8f2>, </span><span style=color:#bd93f9>255</span><span style=color:#f8f8f2>],</span></span>
<span class=line><span style=color:#f8f8f2>  </span><span style=color:#6272a4>//  ~~~~ The typo is now correctly detected</span></span>
<span class=line><span style=color:#f8f8f2>};</span></span>
<span class=line><span style=color:#6272a4>// But we now have an undesirable error here - 'palette.red' "could" be a string.</span></span>
<span class=line><span style=color:#ff79c6>const</span><span style=color:#f8f8f2> redComponent </span><span style=color:#ff79c6>=</span><span style=color:#f8f8f2> palette.red.</span><span style=color:#50fa7b>at</span><span style=color:#f8f8f2>(</span><span style=color:#bd93f9>0</span><span style=color:#f8f8f2>);</span></span></code></pre><p>The <code>satisfies</code> operator lets us validate that the type of an expression matches some type, without changing the resulting type of that expression. As an example, we could use <code>satisfies</code> to validate that all the properties of palette are compatible with <code>string | number[]</code>:</p><pre class="astro-code dracula" is:raw="" style=background-color:#282a36;overflow-x:auto tabindex=0><code><span class=line><span style=color:#ff79c6>type</span><span style=color:#f8f8f2> </span><span style=color:#8be9fd;font-style:italic>Colors</span><span style=color:#f8f8f2> </span><span style=color:#ff79c6>=</span><span style=color:#f8f8f2> </span><span style=color:#e9f284>'</span><span style=color:#f1fa8c>red</span><span style=color:#e9f284>'</span><span style=color:#f8f8f2> </span><span style=color:#ff79c6>|</span><span style=color:#f8f8f2> </span><span style=color:#e9f284>'</span><span style=color:#f1fa8c>green</span><span style=color:#e9f284>'</span><span style=color:#f8f8f2> </span><span style=color:#ff79c6>|</span><span style=color:#f8f8f2> </span><span style=color:#e9f284>'</span><span style=color:#f1fa8c>blue</span><span style=color:#e9f284>'</span><span style=color:#f8f8f2>;</span></span>
<span class=line><span style=color:#ff79c6>type</span><span style=color:#f8f8f2> </span><span style=color:#8be9fd;font-style:italic>RGB</span><span style=color:#f8f8f2> </span><span style=color:#ff79c6>=</span><span style=color:#f8f8f2> [red: </span><span style=color:#8be9fd;font-style:italic>number</span><span style=color:#f8f8f2>, green: </span><span style=color:#8be9fd;font-style:italic>number</span><span style=color:#f8f8f2>, blue: </span><span style=color:#8be9fd;font-style:italic>number</span><span style=color:#f8f8f2>];</span></span>
<span class=line></span>
<span class=line><span style=color:#ff79c6>const</span><span style=color:#f8f8f2> palette </span><span style=color:#ff79c6>=</span><span style=color:#f8f8f2> {</span></span>
<span class=line><span style=color:#f8f8f2>  red</span><span style=color:#ff79c6>:</span><span style=color:#f8f8f2> [</span><span style=color:#bd93f9>255</span><span style=color:#f8f8f2>, </span><span style=color:#bd93f9>0</span><span style=color:#f8f8f2>, </span><span style=color:#bd93f9>0</span><span style=color:#f8f8f2>],</span></span>
<span class=line><span style=color:#f8f8f2>  green</span><span style=color:#ff79c6>:</span><span style=color:#f8f8f2> </span><span style=color:#e9f284>'</span><span style=color:#f1fa8c>#00ff00</span><span style=color:#e9f284>'</span><span style=color:#f8f8f2>,</span></span>
<span class=line><span style=color:#f8f8f2>  bleu</span><span style=color:#ff79c6>:</span><span style=color:#f8f8f2> [</span><span style=color:#bd93f9>0</span><span style=color:#f8f8f2>, </span><span style=color:#bd93f9>0</span><span style=color:#f8f8f2>, </span><span style=color:#bd93f9>255</span><span style=color:#f8f8f2>],</span></span>
<span class=line><span style=color:#f8f8f2>  </span><span style=color:#6272a4>//  ~~~~ The typo is now caught!</span></span>
<span class=line><span style=color:#f8f8f2>} </span><span style=color:#ff79c6>satisfies</span><span style=color:#f8f8f2> </span><span style=color:#8be9fd;font-style:italic>Record</span><span style=color:#f8f8f2>&#x3C;</span><span style=color:#ffb86c;font-style:italic>Colors</span><span style=color:#f8f8f2>, </span><span style=color:#8be9fd;font-style:italic>string</span><span style=color:#f8f8f2> </span><span style=color:#ff79c6>|</span><span style=color:#f8f8f2> </span><span style=color:#ffb86c;font-style:italic>RGB</span><span style=color:#f8f8f2>>;</span></span>
<span class=line></span>
<span class=line><span style=color:#6272a4>// Both of these methods are still accessible!</span></span>
<span class=line><span style=color:#ff79c6>const</span><span style=color:#f8f8f2> redComponent </span><span style=color:#ff79c6>=</span><span style=color:#f8f8f2> palette.red.</span><span style=color:#50fa7b>at</span><span style=color:#f8f8f2>(</span><span style=color:#bd93f9>0</span><span style=color:#f8f8f2>);</span></span>
<span class=line><span style=color:#ff79c6>const</span><span style=color:#f8f8f2> greenNormalized </span><span style=color:#ff79c6>=</span><span style=color:#f8f8f2> palette.green.</span><span style=color:#50fa7b>toUpperCase</span><span style=color:#f8f8f2>();</span></span></code></pre><p>Learn more from the following resources:</p><ul><li><a href=https://www.typescriptlang.org/docs/handbook/release-notes/typescript-4-9.html#the-satisfies-operator rel="noopener noreferrer nofollow" target=_blank>Satisfies Keyword</a></li></ul></main>