<!DOCTYPE html><link href=/_astro/_...topicId_.bad8bb91.css rel=stylesheet /><main class=prose-custom id=main-content><h1 id=cache-aside>Cache-aside</h1><p>The application is responsible for reading and writing from storage. The cache does not interact with storage directly. The application does the following:</p><ul><li>Look for entry in cache, resulting in a cache miss</li><li>Load entry from the database</li><li>Add entry to cache</li><li>Return entry</li></ul><pre class="astro-code dracula" is:raw="" style=background-color:#282a36;overflow-x:auto tabindex=0><code><span class=line><span style=color:#ff79c6>def</span><span style=color:#f8f8f2> </span><span style=color:#50fa7b>get_user</span><span style=color:#f8f8f2>(</span><span style=color:#bd93f9;font-style:italic>self</span><span style=color:#f8f8f2>, </span><span style=color:#ffb86c;font-style:italic>user_id</span><span style=color:#f8f8f2>):</span></span>
<span class=line><span style=color:#f8f8f2>  user </span><span style=color:#ff79c6>=</span><span style=color:#f8f8f2> cache.get(</span><span style=color:#e9f284>"</span><span style=color:#f1fa8c>user.</span><span style=color:#bd93f9>{0}</span><span style=color:#e9f284>"</span><span style=color:#f8f8f2>, user_id)</span></span>
<span class=line><span style=color:#f8f8f2>  </span><span style=color:#ff79c6>if</span><span style=color:#f8f8f2> user </span><span style=color:#ff79c6>is</span><span style=color:#f8f8f2> </span><span style=color:#bd93f9>None</span><span style=color:#f8f8f2>:</span></span>
<span class=line><span style=color:#f8f8f2>    user </span><span style=color:#ff79c6>=</span><span style=color:#f8f8f2> db.query(</span><span style=color:#e9f284>"</span><span style=color:#f1fa8c>SELECT * FROM users WHERE user_id = </span><span style=color:#bd93f9>{0}</span><span style=color:#e9f284>"</span><span style=color:#f8f8f2>, user_id)</span></span>
<span class=line><span style=color:#f8f8f2>      </span><span style=color:#ff79c6>if</span><span style=color:#f8f8f2> user </span><span style=color:#ff79c6>is</span><span style=color:#f8f8f2> </span><span style=color:#ff79c6>not</span><span style=color:#f8f8f2> </span><span style=color:#bd93f9>None</span><span style=color:#f8f8f2>:</span></span>
<span class=line><span style=color:#f8f8f2>        key </span><span style=color:#ff79c6>=</span><span style=color:#f8f8f2> </span><span style=color:#e9f284>"</span><span style=color:#f1fa8c>user.</span><span style=color:#bd93f9>{0}</span><span style=color:#e9f284>"</span><span style=color:#f8f8f2>.format(user_id)</span></span>
<span class=line><span style=color:#f8f8f2>        cache.set(key, json.dumps(user))</span></span>
<span class=line><span style=color:#f8f8f2>  </span><span style=color:#ff79c6>return</span><span style=color:#f8f8f2> user</span></span></code></pre><p><a href=https://memcached.org/ rel="noopener noreferrer nofollow" target=_blank>Memcached</a> is generally used in this manner. Subsequent reads of data added to cache are fast. Cache-aside is also referred to as lazy loading. Only requested data is cached, which avoids filling up the cache with data that isnâ€™t requested.</p><p><img alt="Cache Aside" src=https://i.imgur.com/Ujf0awN.png></p><p>To learn more, have a look at the following resources:</p><ul><li><a href=https://www.slideshare.net/tmatyashovsky/from-cache-to-in-memory-data-grid-introduction-to-hazelcast rel="noopener noreferrer nofollow" target=_blank>From cache to in-memory data grid</a></li></ul></main>