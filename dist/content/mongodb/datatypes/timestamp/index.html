<!DOCTYPE html><link href=/_astro/_...topicId_.bad8bb91.css rel=stylesheet /><main class=prose-custom id=main-content><h1 id=timestamp>Timestamp</h1><p>A “Timestamp” in MongoDB is a specific datatype used for tracking the time of an event or a document modification. It’s a 64-bit value containing a 4-byte incrementing ordinal for operations within a given second and a 4-byte timestamp representing the seconds since the Unix epoch (Jan 1, 1970).</p><h2 id=when-to-use-timestamp>When to use Timestamp</h2><p>Timestamps are mainly used for internal MongoDB operations, such as replication and sharding. They can be useful in tracking the order of operations in a distributed system and ensuring data consistency across multiple nodes.</p><h2 id=creating-and-querying-timestamps>Creating and Querying Timestamps</h2><p>To create a Timestamp, you can use the BSON Timestamp type. The syntax is as follows:</p><pre class="astro-code dracula" is:raw="" style=background-color:#282a36;overflow-x:auto tabindex=0><code><span class=line><span style=color:#ff79c6;font-weight:700>new</span><span style=color:#f8f8f2> </span><span style=color:#50fa7b>Timestamp</span><span style=color:#f8f8f2>(t, i);</span></span></code></pre><p>Where <code>t</code> is the seconds since the Unix epoch, and <code>i</code> is an incrementing ordinal for operations within a given second.</p><p>For example, to create a Timestamp for the current time:</p><pre class="astro-code dracula" is:raw="" style=background-color:#282a36;overflow-x:auto tabindex=0><code><span class=line><span style=color:#ff79c6>var</span><span style=color:#f8f8f2> currentTimestamp </span><span style=color:#ff79c6>=</span><span style=color:#f8f8f2> </span><span style=color:#ff79c6;font-weight:700>new</span><span style=color:#f8f8f2> </span><span style=color:#50fa7b>Timestamp</span><span style=color:#f8f8f2>(</span></span>
<span class=line><span style=color:#f8f8f2>  Math.</span><span style=color:#50fa7b>floor</span><span style=color:#f8f8f2>(</span><span style=color:#ff79c6;font-weight:700>new</span><span style=color:#f8f8f2> </span><span style=color:#50fa7b>Date</span><span style=color:#f8f8f2>().</span><span style=color:#50fa7b>getTime</span><span style=color:#f8f8f2>() </span><span style=color:#ff79c6>/</span><span style=color:#f8f8f2> </span><span style=color:#bd93f9>1000</span><span style=color:#f8f8f2>),</span></span>
<span class=line><span style=color:#f8f8f2>  </span><span style=color:#bd93f9>1</span></span>
<span class=line><span style=color:#f8f8f2>);</span></span></code></pre><p>To query documents based on their Timestamp, you can use the <code>$gt</code>, <code>$gte</code>, <code>$lt</code>, or <code>$lte</code> query operators:</p><pre class="astro-code dracula" is:raw="" style=background-color:#282a36;overflow-x:auto tabindex=0><code><span class=line><span style=color:#6272a4>// Find all documents with a Timestamp greater than a specified date</span></span>
<span class=line><span style=color:#f8f8f2>db.collection.</span><span style=color:#50fa7b>find</span><span style=color:#f8f8f2>({</span></span>
<span class=line><span style=color:#f8f8f2>  timestampFieldName</span><span style=color:#ff79c6>:</span><span style=color:#f8f8f2> {</span></span>
<span class=line><span style=color:#f8f8f2>    $gt</span><span style=color:#ff79c6>:</span><span style=color:#f8f8f2> </span><span style=color:#ff79c6;font-weight:700>new</span><span style=color:#f8f8f2> </span><span style=color:#50fa7b>Timestamp</span><span style=color:#f8f8f2>(Math.</span><span style=color:#50fa7b>floor</span><span style=color:#f8f8f2>(</span><span style=color:#ff79c6;font-weight:700>new</span><span style=color:#f8f8f2> </span><span style=color:#50fa7b>Date</span><span style=color:#f8f8f2>(</span><span style=color:#e9f284>'</span><span style=color:#f1fa8c>2021-01-01</span><span style=color:#e9f284>'</span><span style=color:#f8f8f2>).</span><span style=color:#50fa7b>getTime</span><span style=color:#f8f8f2>() </span><span style=color:#ff79c6>/</span><span style=color:#f8f8f2> </span><span style=color:#bd93f9>1000</span><span style=color:#f8f8f2>), </span><span style=color:#bd93f9>1</span><span style=color:#f8f8f2>),</span></span>
<span class=line><span style=color:#f8f8f2>  },</span></span>
<span class=line><span style=color:#f8f8f2>});</span></span></code></pre><p>Keep in mind that using Timestamps for application purposes is generally not recommended, as their main purpose is to serve internal MongoDB operations. Instead, consider using the <code>Date</code> datatype for general-purpose time tracking in your application.</p><p>Overall, Timestamps are a powerful tool in MongoDB for managing operations in distributed systems and maintaining data consistency.</p></main>