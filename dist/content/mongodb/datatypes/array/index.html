<!DOCTYPE html><link href=/_astro/_...topicId_.bad8bb91.css rel=stylesheet /><main class=prose-custom id=main-content><h1 id=array>Array</h1><p>In this section, we will discuss the <code>Array</code> datatype in MongoDB. Arrays are used to store multiple values in a single field of a MongoDB document. Arrays can contain values of different data types, including strings, numbers, dates, objects, and other embedded arrays.</p><h2 id=why-use-arrays>Why use Arrays?</h2><p>Arrays are useful when you want to store multiple related items as part of a single document. For example, you might have a list of tags for a blog post or the ingredients for a recipe. Using arrays simplifies querying the data, as you can easily search for documents that contain a specific item in an array or match several items at once.</p><h2 id=creating-arrays>Creating Arrays</h2><p>To create an array in MongoDB, simply include it as a field in a document using the square bracket notation (<code>[]</code>). You can add values to the array while creating the document or update it later with new items.</p><p>Example of creating an array in a document:</p><pre class="astro-code dracula" is:raw="" style=background-color:#282a36;overflow-x:auto tabindex=0><code><span class=line><span style=color:#f8f8f2>{</span></span>
<span class=line><span style=color:#f8f8f2>  </span><span style=color:#e9f284>"</span><span style=color:#f1fa8c>_id</span><span style=color:#e9f284>"</span><span style=color:#f8f8f2>: </span><span style=color:#50fa7b>ObjectId</span><span style=color:#f8f8f2>(</span><span style=color:#e9f284>"</span><span style=color:#f1fa8c>123xyz</span><span style=color:#e9f284>"</span><span style=color:#f8f8f2>),</span></span>
<span class=line><span style=color:#f8f8f2>  </span><span style=color:#e9f284>"</span><span style=color:#f1fa8c>name</span><span style=color:#e9f284>"</span><span style=color:#f8f8f2>: </span><span style=color:#e9f284>"</span><span style=color:#f1fa8c>John Doe</span><span style=color:#e9f284>"</span><span style=color:#f8f8f2>,</span></span>
<span class=line><span style=color:#f8f8f2>  </span><span style=color:#e9f284>"</span><span style=color:#f1fa8c>hobbies</span><span style=color:#e9f284>"</span><span style=color:#f8f8f2>: [</span><span style=color:#e9f284>"</span><span style=color:#f1fa8c>reading</span><span style=color:#e9f284>"</span><span style=color:#f8f8f2>, </span><span style=color:#e9f284>"</span><span style=color:#f1fa8c>swimming</span><span style=color:#e9f284>"</span><span style=color:#f8f8f2>, </span><span style=color:#e9f284>"</span><span style=color:#f1fa8c>coding</span><span style=color:#e9f284>"</span><span style=color:#f8f8f2>]</span></span>
<span class=line><span style=color:#f8f8f2>}</span></span></code></pre><h2 id=querying-arrays>Querying Arrays</h2><p>MongoDB provides various operators such as <code>$in</code>, <code>$all</code>, and <code>$size</code>, for querying documents with arrays. The following are some examples:</p><ul><li>Finding documents with a specific item in an array:</li></ul><pre class="astro-code dracula" is:raw="" style=background-color:#282a36;overflow-x:auto tabindex=0><code><span class=line><span style=color:#f8f8f2>db.collection.</span><span style=color:#50fa7b>find</span><span style=color:#f8f8f2>({ hobbies</span><span style=color:#ff79c6>:</span><span style=color:#f8f8f2> </span><span style=color:#e9f284>'</span><span style=color:#f1fa8c>swimming</span><span style=color:#e9f284>'</span><span style=color:#f8f8f2> });</span></span></code></pre><ul><li>Finding documents with any of the specified items in an array:</li></ul><pre class="astro-code dracula" is:raw="" style=background-color:#282a36;overflow-x:auto tabindex=0><code><span class=line><span style=color:#f8f8f2>db.collection.</span><span style=color:#50fa7b>find</span><span style=color:#f8f8f2>({ hobbies</span><span style=color:#ff79c6>:</span><span style=color:#f8f8f2> { $in</span><span style=color:#ff79c6>:</span><span style=color:#f8f8f2> [</span><span style=color:#e9f284>'</span><span style=color:#f1fa8c>swimming</span><span style=color:#e9f284>'</span><span style=color:#f8f8f2>, </span><span style=color:#e9f284>'</span><span style=color:#f1fa8c>coding</span><span style=color:#e9f284>'</span><span style=color:#f8f8f2>] } });</span></span></code></pre><ul><li>Finding documents with all specified items in an array:</li></ul><pre class="astro-code dracula" is:raw="" style=background-color:#282a36;overflow-x:auto tabindex=0><code><span class=line><span style=color:#f8f8f2>db.collection.</span><span style=color:#50fa7b>find</span><span style=color:#f8f8f2>({ hobbies</span><span style=color:#ff79c6>:</span><span style=color:#f8f8f2> { $all</span><span style=color:#ff79c6>:</span><span style=color:#f8f8f2> [</span><span style=color:#e9f284>'</span><span style=color:#f1fa8c>reading</span><span style=color:#e9f284>'</span><span style=color:#f8f8f2>, </span><span style=color:#e9f284>'</span><span style=color:#f1fa8c>coding</span><span style=color:#e9f284>'</span><span style=color:#f8f8f2>] } });</span></span></code></pre><ul><li>Finding documents with a specific array size:</li></ul><pre class="astro-code dracula" is:raw="" style=background-color:#282a36;overflow-x:auto tabindex=0><code><span class=line><span style=color:#f8f8f2>db.collection.</span><span style=color:#50fa7b>find</span><span style=color:#f8f8f2>({ hobbies</span><span style=color:#ff79c6>:</span><span style=color:#f8f8f2> { $size</span><span style=color:#ff79c6>:</span><span style=color:#f8f8f2> </span><span style=color:#bd93f9>3</span><span style=color:#f8f8f2> } });</span></span></code></pre><h2 id=updating-arrays>Updating Arrays</h2><p>You can update documents containing arrays by using operators like <code>$push</code>, <code>$addToSet</code>, <code>$pull</code>, and <code>$pop</code>.</p><ul><li>Adding a new item to an array:</li></ul><pre class="astro-code dracula" is:raw="" style=background-color:#282a36;overflow-x:auto tabindex=0><code><span class=line><span style=color:#f8f8f2>db.collection.</span><span style=color:#50fa7b>updateOne</span><span style=color:#f8f8f2>(</span></span>
<span class=line><span style=color:#f8f8f2>  { _id</span><span style=color:#ff79c6>:</span><span style=color:#f8f8f2> </span><span style=color:#50fa7b>ObjectId</span><span style=color:#f8f8f2>(</span><span style=color:#e9f284>'</span><span style=color:#f1fa8c>123xyz</span><span style=color:#e9f284>'</span><span style=color:#f8f8f2>) },</span></span>
<span class=line><span style=color:#f8f8f2>  { $push</span><span style=color:#ff79c6>:</span><span style=color:#f8f8f2> { hobbies</span><span style=color:#ff79c6>:</span><span style=color:#f8f8f2> </span><span style=color:#e9f284>'</span><span style=color:#f1fa8c>painting</span><span style=color:#e9f284>'</span><span style=color:#f8f8f2> } }</span></span>
<span class=line><span style=color:#f8f8f2>);</span></span></code></pre><ul><li>Adding unique items to an array:</li></ul><pre class="astro-code dracula" is:raw="" style=background-color:#282a36;overflow-x:auto tabindex=0><code><span class=line><span style=color:#f8f8f2>db.collection.</span><span style=color:#50fa7b>updateOne</span><span style=color:#f8f8f2>(</span></span>
<span class=line><span style=color:#f8f8f2>  { _id</span><span style=color:#ff79c6>:</span><span style=color:#f8f8f2> </span><span style=color:#50fa7b>ObjectId</span><span style=color:#f8f8f2>(</span><span style=color:#e9f284>'</span><span style=color:#f1fa8c>123xyz</span><span style=color:#e9f284>'</span><span style=color:#f8f8f2>) },</span></span>
<span class=line><span style=color:#f8f8f2>  { $addToSet</span><span style=color:#ff79c6>:</span><span style=color:#f8f8f2> { hobbies</span><span style=color:#ff79c6>:</span><span style=color:#f8f8f2> </span><span style=color:#e9f284>'</span><span style=color:#f1fa8c>painting</span><span style=color:#e9f284>'</span><span style=color:#f8f8f2> } }</span></span>
<span class=line><span style=color:#f8f8f2>);</span></span></code></pre><ul><li>Removing an item from an array:</li></ul><pre class="astro-code dracula" is:raw="" style=background-color:#282a36;overflow-x:auto tabindex=0><code><span class=line><span style=color:#f8f8f2>db.collection.</span><span style=color:#50fa7b>updateOne</span><span style=color:#f8f8f2>(</span></span>
<span class=line><span style=color:#f8f8f2>  { _id</span><span style=color:#ff79c6>:</span><span style=color:#f8f8f2> </span><span style=color:#50fa7b>ObjectId</span><span style=color:#f8f8f2>(</span><span style=color:#e9f284>'</span><span style=color:#f1fa8c>123xyz</span><span style=color:#e9f284>'</span><span style=color:#f8f8f2>) },</span></span>
<span class=line><span style=color:#f8f8f2>  { $pull</span><span style=color:#ff79c6>:</span><span style=color:#f8f8f2> { hobbies</span><span style=color:#ff79c6>:</span><span style=color:#f8f8f2> </span><span style=color:#e9f284>'</span><span style=color:#f1fa8c>reading</span><span style=color:#e9f284>'</span><span style=color:#f8f8f2> } }</span></span>
<span class=line><span style=color:#f8f8f2>);</span></span></code></pre><ul><li>Removing the first or last item from an array:</li></ul><pre class="astro-code dracula" is:raw="" style=background-color:#282a36;overflow-x:auto tabindex=0><code><span class=line><span style=color:#6272a4>// Remove the first item (use $pop with -1)</span></span>
<span class=line><span style=color:#f8f8f2>db.collection.</span><span style=color:#50fa7b>updateOne</span><span style=color:#f8f8f2>({ _id</span><span style=color:#ff79c6>:</span><span style=color:#f8f8f2> </span><span style=color:#50fa7b>ObjectId</span><span style=color:#f8f8f2>(</span><span style=color:#e9f284>'</span><span style=color:#f1fa8c>123xyz</span><span style=color:#e9f284>'</span><span style=color:#f8f8f2>) }, { $pop</span><span style=color:#ff79c6>:</span><span style=color:#f8f8f2> { hobbies</span><span style=color:#ff79c6>:</span><span style=color:#f8f8f2> </span><span style=color:#ff79c6>-</span><span style=color:#bd93f9>1</span><span style=color:#f8f8f2> } });</span></span>
<span class=line></span>
<span class=line><span style=color:#6272a4>// Remove the last item (use $pop with 1)</span></span>
<span class=line><span style=color:#f8f8f2>db.collection.</span><span style=color:#50fa7b>updateOne</span><span style=color:#f8f8f2>({ _id</span><span style=color:#ff79c6>:</span><span style=color:#f8f8f2> </span><span style=color:#50fa7b>ObjectId</span><span style=color:#f8f8f2>(</span><span style=color:#e9f284>'</span><span style=color:#f1fa8c>123xyz</span><span style=color:#e9f284>'</span><span style=color:#f8f8f2>) }, { $pop</span><span style=color:#ff79c6>:</span><span style=color:#f8f8f2> { hobbies</span><span style=color:#ff79c6>:</span><span style=color:#f8f8f2> </span><span style=color:#bd93f9>1</span><span style=color:#f8f8f2> } });</span></span></code></pre><p>In this section, weâ€™ve covered the essentials of using the <code>Array</code> datatype in MongoDB. With this knowledge, you can efficiently model and query data that requires multiple related items within a single document.</p></main>