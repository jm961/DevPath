import{d as r,y as N}from"./hooks.module.33a64516.js";import{a as P,T as k}from"./jwt.2ecd63f4.js";import{S as C}from"./Spinner.ebd438b0.js";import{h as L,a as S}from"./http.f68f099c.js";import{u as e}from"./jsxRuntime.module.9861337b.js";import{k as E}from"./preact.module.0dc3e805.js";function q(){const[n,g]=r(""),[f,m]=r(""),[d,w]=r(""),[i,x]=r(""),[b,a]=r(""),[h,c]=r(""),[s,p]=r(!0),[_,o]=r(!1),v=async t=>{if(t.preventDefault(),o(!0),a(""),c(""),d!==i){a("Passwords do not match"),o(!1);return}const{response:u,error:l}=await L("https://api.devpath.sh/api/v1-update-password",{oldPassword:n==="email"?f:"social-auth",password:d,confirmPassword:i});if(l){a(l.message||"Something went wrong. Please try again."),o(!1);return}a(""),m(""),w(""),x(""),c("Password updated successfully!"),o(!1),setTimeout(()=>{c("")},3e3)},y=async()=>{p(!0),a("");const{error:t,response:u}=await S("https://api.devpath.sh/api/v1-me");if(t||!u){if(t?.status===401){P.remove(k),window.location.reload();return}p(!1),a(t?.message||"Failed to load profile data");return}const{authProvider:l}=u;g(l||""),p(!1)};return N(()=>{y().finally(()=>{})},[]),e("form",{onSubmit:v,className:"max-w-3xl",children:[e("h2",{className:"text-3xl font-black text-white sm:text-4xl",children:"Security Settings"}),e("p",{className:"mt-2 text-[#8b949e]",children:"Update your password to keep your account secure"}),e("div",{className:"mt-8 space-y-6",children:[n==="email"&&e("div",{className:"flex w-full flex-col",children:[e("label",{htmlFor:"current-password",className:'mb-2 text-sm font-medium text-[#f0f6fc] after:ml-1 after:text-[#ef4444] after:content-["*"]',children:"Current Password"}),e("input",{disabled:n!=="email",type:"password",name:"current-password",id:"current-password",autoComplete:"current-password",className:"input block w-full rounded-2xl border-[1.5px] border-white/10 bg-white/5 px-5 py-3.5 text-[#f0f6fc] shadow-[inset_0_2px_4px_rgba(0,0,0,0.2)] backdrop-blur-xl outline-none transition-all duration-300 placeholder:text-[#6e7681] focus:border-[#3b82f6] focus:bg-white/8 focus:shadow-[0_0_0_4px_rgba(59,130,246,0.15),0_8px_24px_rgba(59,130,246,0.15),inset_0_2px_4px_rgba(0,0,0,0.1)] focus:-translate-y-0.5 disabled:cursor-not-allowed disabled:opacity-50",required:!0,minLength:6,placeholder:"Enter your current password",value:f,onInput:t=>m(t.target.value)})]}),e("div",{className:"flex w-full flex-col",children:[e("label",{htmlFor:"new-password",className:'mb-2 text-sm font-medium text-[#f0f6fc] after:ml-1 after:text-[#ef4444] after:content-["*"]',children:"New Password"}),e("input",{type:"password",name:"new-password",id:"new-password",autoComplete:"new-password",className:"input block w-full rounded-2xl border-[1.5px] border-white/10 bg-white/5 px-5 py-3.5 text-[#f0f6fc] shadow-[inset_0_2px_4px_rgba(0,0,0,0.2)] backdrop-blur-xl outline-none transition-all duration-300 placeholder:text-[#6e7681] focus:border-[#3b82f6] focus:bg-white/8 focus:shadow-[0_0_0_4px_rgba(59,130,246,0.15),0_8px_24px_rgba(59,130,246,0.15),inset_0_2px_4px_rgba(0,0,0,0.1)] focus:-translate-y-0.5 disabled:cursor-not-allowed disabled:opacity-50",required:!0,minLength:6,placeholder:"Enter your new password",value:d,disabled:s,onInput:t=>w(t.target.value)}),e("span",{className:"mt-1.5 text-xs text-[#6e7681]",children:"Minimum 6 characters"})]}),e("div",{className:"flex w-full flex-col",children:[e("label",{htmlFor:"new-password-confirmation",className:'mb-2 text-sm font-medium text-[#f0f6fc] after:ml-1 after:text-[#ef4444] after:content-["*"]',children:"Confirm New Password"}),e("input",{type:"password",name:"new-password-confirmation",id:"new-password-confirmation",autoComplete:"new-password",className:"input block w-full rounded-2xl border-[1.5px] border-white/10 bg-white/5 px-5 py-3.5 text-[#f0f6fc] shadow-[inset_0_2px_4px_rgba(0,0,0,0.2)] backdrop-blur-xl outline-none transition-all duration-300 placeholder:text-[#6e7681] focus:border-[#3b82f6] focus:bg-white/8 focus:shadow-[0_0_0_4px_rgba(59,130,246,0.15),0_8px_24px_rgba(59,130,246,0.15),inset_0_2px_4px_rgba(0,0,0,0.1)] focus:-translate-y-0.5 disabled:cursor-not-allowed disabled:opacity-50",required:!0,minLength:6,placeholder:"Re-enter your new password",value:i,disabled:s,onInput:t=>x(t.target.value)})]}),b&&e("div",{className:"flex items-center gap-2 rounded-2xl border border-[#ef4444]/30 bg-[#ef4444]/10 px-4 py-3 backdrop-blur-xl",children:[e("svg",{className:"h-5 w-5 shrink-0 text-[#ef4444]",fill:"currentColor",viewBox:"0 0 20 20",children:e("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})}),e("span",{className:"text-sm font-medium text-[#f0f6fc]",children:b})]}),h&&e("div",{className:"flex items-center gap-2 rounded-2xl border border-[#10b981]/30 bg-[#10b981]/10 px-4 py-3 backdrop-blur-xl",children:[e("svg",{className:"h-5 w-5 shrink-0 text-[#10b981]",fill:"currentColor",viewBox:"0 0 20 20",children:e("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),e("span",{className:"text-sm font-medium text-[#f0f6fc]",children:h})]}),e("button",{type:"submit",disabled:s||_,className:"btn-primary relative mt-8 inline-flex w-full items-center justify-center overflow-hidden rounded-full bg-gradient-to-r from-[#3b82f6] to-[#2563eb] px-8 py-4 text-sm font-bold text-white shadow-[0_2px_8px_rgba(59,130,246,0.3),inset_0_1px_0_rgba(255,255,255,0.2)] transition-all duration-150 hover:-translate-y-0.5 hover:shadow-[0_4px_12px_rgba(59,130,246,0.4),inset_0_1px_0_rgba(255,255,255,0.3)] active:translate-y-0 active:shadow-[0_1px_4px_rgba(59,130,246,0.3),inset_0_1px_0_rgba(255,255,255,0.2)] disabled:cursor-not-allowed disabled:opacity-50 disabled:hover:translate-y-0",children:_?e(E,{children:[e(C,{className:"mr-2 h-4 w-4 text-white"}),"Updating Password..."]}):s?"Loading...":"Update Password"})]})]})}export{q as default};
