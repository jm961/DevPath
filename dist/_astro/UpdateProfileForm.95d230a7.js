import{d as r,y as $}from"./hooks.module.33a64516.js";import{h as M,a as z}from"./http.f68f099c.js";import{a as G,T as U}from"./jwt.2ecd63f4.js";import{S as V}from"./Spinner.ebd438b0.js";import{u as e}from"./jsxRuntime.module.9861337b.js";import{k as O}from"./preact.module.0dc3e805.js";function K(){const[w,g]=r(""),[I,C]=r(""),[u,v]=r(""),[f,y]=r(""),[p,N]=r(""),[x,k]=r(""),[i,m]=r(!0),[L,c]=r(!1),[P,n]=r(""),[S,h]=r(""),[l,s]=r({}),b=(t,a)=>{if(!t)return!0;try{return new URL(t),!0}catch{return s(d=>({...d,[a]:"Please enter a valid URL"})),!1}},R=async t=>{t.preventDefault(),c(!0),n(""),h(""),s({});const a=b(u,"github"),d=b(f,"twitter"),_=b(p,"linkedin"),o=b(x,"website");if(!a||!d||!_||!o){c(!1),n("Please fix the validation errors below");return}const{response:T,error:E}=await M("https://api.devpath.sh/api/v1-update-profile",{name:w,github:u||void 0,linkedin:p||void 0,twitter:f||void 0,website:x||void 0});if(E||!T){c(!1),n(E?.message||"Something went wrong. Please try again.");return}await F(),h("Profile updated successfully!"),c(!1),setTimeout(()=>{h("")},3e3)},F=async()=>{m(!0),n("");const{error:t,response:a}=await z("https://api.devpath.sh/api/v1-me");if(t||!a){if(t?.status===401){G.remove(U),window.location.reload();return}m(!1),n(t?.message||"Failed to load profile data");return}const{name:d,email:_,links:o}=a;g(d||""),C(_),v(o?.github||""),N(o?.linkedin||""),y(o?.twitter||""),k(o?.website||""),m(!1)};return $(()=>{F().finally(()=>{})},[]),e("form",{onSubmit:R,className:"max-w-3xl",children:[e("h2",{className:"text-3xl font-black text-white sm:text-4xl",children:"Profile Settings"}),e("p",{className:"mt-2 text-[#8b949e]",children:"Manage your personal information and social links"}),e("div",{className:"mt-8 space-y-6",children:[e("div",{className:"flex w-full flex-col",children:[e("label",{htmlFor:"name",className:'mb-2 text-sm font-medium text-[#f0f6fc] after:ml-1 after:text-[#ef4444] after:content-["*"]',children:"Full Name"}),e("input",{type:"text",name:"name",id:"name",autoComplete:"name",className:"input block w-full rounded-2xl border-[1.5px] border-white/10 bg-white/5 px-5 py-3.5 text-[#f0f6fc] shadow-[inset_0_2px_4px_rgba(0,0,0,0.2)] backdrop-blur-xl outline-none transition-all duration-300 placeholder:text-[#6e7681] focus:border-[#3b82f6] focus:bg-white/8 focus:shadow-[0_0_0_4px_rgba(59,130,246,0.15),0_8px_24px_rgba(59,130,246,0.15),inset_0_2px_4px_rgba(0,0,0,0.1)] focus:-translate-y-0.5 disabled:cursor-not-allowed disabled:opacity-50",required:!0,placeholder:"John Doe",value:w,disabled:i,onInput:t=>g(t.target.value)})]}),e("div",{className:"flex w-full flex-col",children:[e("label",{htmlFor:"email",className:'mb-2 text-sm font-medium text-[#f0f6fc] after:ml-1 after:text-[#ef4444] after:content-["*"]',children:"Email Address"}),e("input",{type:"email",name:"email",id:"email",autoComplete:"email",className:"block w-full rounded-2xl border-[1.5px] border-white/10 bg-white/5 px-5 py-3.5 text-[#8b949e] shadow-[inset_0_2px_4px_rgba(0,0,0,0.2)] backdrop-blur-xl outline-none placeholder:text-[#6e7681] cursor-not-allowed opacity-60",required:!0,disabled:!0,placeholder:"john@example.com",value:I}),e("span",{className:"mt-1.5 text-xs text-[#6e7681]",children:"Email cannot be changed"})]}),e("div",{className:"flex w-full flex-col",children:[e("label",{htmlFor:"github",className:"mb-2 text-sm font-medium text-[#f0f6fc]",children:"GitHub Profile"}),e("input",{type:"url",name:"github",id:"github",className:`input block w-full rounded-2xl border-[1.5px] ${l.github?"border-[#ef4444]/50 focus:border-[#ef4444]":"border-white/10 focus:border-[#3b82f6]"} bg-white/5 px-5 py-3.5 text-[#f0f6fc] shadow-[inset_0_2px_4px_rgba(0,0,0,0.2)] backdrop-blur-xl outline-none transition-all duration-300 placeholder:text-[#6e7681] focus:bg-white/8 focus:shadow-[0_0_0_4px_rgba(59,130,246,0.15),0_8px_24px_rgba(59,130,246,0.15),inset_0_2px_4px_rgba(0,0,0,0.1)] focus:-translate-y-0.5 disabled:cursor-not-allowed disabled:opacity-50`,placeholder:"https://github.com/username",value:u,disabled:i,onInput:t=>{v(t.target.value),s(a=>({...a,github:""}))}}),l.github&&e("span",{className:"mt-1.5 text-xs text-[#ef4444]",children:l.github})]}),e("div",{className:"flex w-full flex-col",children:[e("label",{htmlFor:"twitter",className:"mb-2 text-sm font-medium text-[#f0f6fc]",children:"Twitter Profile"}),e("input",{type:"url",name:"twitter",id:"twitter",className:`input block w-full rounded-2xl border-[1.5px] ${l.twitter?"border-[#ef4444]/50 focus:border-[#ef4444]":"border-white/10 focus:border-[#3b82f6]"} bg-white/5 px-5 py-3.5 text-[#f0f6fc] shadow-[inset_0_2px_4px_rgba(0,0,0,0.2)] backdrop-blur-xl outline-none transition-all duration-300 placeholder:text-[#6e7681] focus:bg-white/8 focus:shadow-[0_0_0_4px_rgba(59,130,246,0.15),0_8px_24px_rgba(59,130,246,0.15),inset_0_2px_4px_rgba(0,0,0,0.1)] focus:-translate-y-0.5 disabled:cursor-not-allowed disabled:opacity-50`,placeholder:"https://twitter.com/username",value:f,disabled:i,onInput:t=>{y(t.target.value),s(a=>({...a,twitter:""}))}}),l.twitter&&e("span",{className:"mt-1.5 text-xs text-[#ef4444]",children:l.twitter})]}),e("div",{className:"flex w-full flex-col",children:[e("label",{htmlFor:"linkedin",className:"mb-2 text-sm font-medium text-[#f0f6fc]",children:"LinkedIn Profile"}),e("input",{type:"url",name:"linkedin",id:"linkedin",className:`input block w-full rounded-2xl border-[1.5px] ${l.linkedin?"border-[#ef4444]/50 focus:border-[#ef4444]":"border-white/10 focus:border-[#3b82f6]"} bg-white/5 px-5 py-3.5 text-[#f0f6fc] shadow-[inset_0_2px_4px_rgba(0,0,0,0.2)] backdrop-blur-xl outline-none transition-all duration-300 placeholder:text-[#6e7681] focus:bg-white/8 focus:shadow-[0_0_0_4px_rgba(59,130,246,0.15),0_8px_24px_rgba(59,130,246,0.15),inset_0_2px_4px_rgba(0,0,0,0.1)] focus:-translate-y-0.5 disabled:cursor-not-allowed disabled:opacity-50`,placeholder:"https://www.linkedin.com/in/username",value:p,disabled:i,onInput:t=>{N(t.target.value),s(a=>({...a,linkedin:""}))}}),l.linkedin&&e("span",{className:"mt-1.5 text-xs text-[#ef4444]",children:l.linkedin})]}),e("div",{className:"flex w-full flex-col",children:[e("label",{htmlFor:"website",className:"mb-2 text-sm font-medium text-[#f0f6fc]",children:"Personal Website"}),e("input",{type:"url",name:"website",id:"website",className:`input block w-full rounded-2xl border-[1.5px] ${l.website?"border-[#ef4444]/50 focus:border-[#ef4444]":"border-white/10 focus:border-[#3b82f6]"} bg-white/5 px-5 py-3.5 text-[#f0f6fc] shadow-[inset_0_2px_4px_rgba(0,0,0,0.2)] backdrop-blur-xl outline-none transition-all duration-300 placeholder:text-[#6e7681] focus:bg-white/8 focus:shadow-[0_0_0_4px_rgba(59,130,246,0.15),0_8px_24px_rgba(59,130,246,0.15),inset_0_2px_4px_rgba(0,0,0,0.1)] focus:-translate-y-0.5 disabled:cursor-not-allowed disabled:opacity-50`,placeholder:"https://example.com",value:x,disabled:i,onInput:t=>{k(t.target.value),s(a=>({...a,website:""}))}}),l.website&&e("span",{className:"mt-1.5 text-xs text-[#ef4444]",children:l.website})]}),P&&e("div",{className:"flex items-center gap-2 rounded-2xl border border-[#ef4444]/30 bg-[#ef4444]/10 px-4 py-3 backdrop-blur-xl",children:[e("svg",{className:"h-5 w-5 shrink-0 text-[#ef4444]",fill:"currentColor",viewBox:"0 0 20 20",children:e("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})}),e("span",{className:"text-sm font-medium text-[#f0f6fc]",children:P})]}),S&&e("div",{className:"flex items-center gap-2 rounded-2xl border border-[#10b981]/30 bg-[#10b981]/10 px-4 py-3 backdrop-blur-xl",children:[e("svg",{className:"h-5 w-5 shrink-0 text-[#10b981]",fill:"currentColor",viewBox:"0 0 20 20",children:e("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),e("span",{className:"text-sm font-medium text-[#f0f6fc]",children:S})]}),e("button",{type:"submit",disabled:i||L,className:"btn-primary relative mt-8 inline-flex w-full items-center justify-center overflow-hidden rounded-full bg-gradient-to-r from-[#3b82f6] to-[#2563eb] px-8 py-4 text-sm font-bold text-white shadow-[0_2px_8px_rgba(59,130,246,0.3),inset_0_1px_0_rgba(255,255,255,0.2)] transition-all duration-150 hover:-translate-y-0.5 hover:shadow-[0_4px_12px_rgba(59,130,246,0.4),inset_0_1px_0_rgba(255,255,255,0.3)] active:translate-y-0 active:shadow-[0_1px_4px_rgba(59,130,246,0.3),inset_0_1px_0_rgba(255,255,255,0.2)] disabled:cursor-not-allowed disabled:opacity-50 disabled:hover:translate-y-0",children:L?e(O,{children:[e(V,{className:"mr-2 h-4 w-4 text-white"}),"Saving Changes..."]}):i?"Loading...":"Save Changes"})]})]})}export{K as UpdateProfileForm};
