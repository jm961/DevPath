import{d as n,y as m}from"./hooks.module.33a64516.js";import{u as e}from"./jsxRuntime.module.9861337b.js";import"./preact.module.0dc3e805.js";function h(){const[t,a]=n({type:"suggestion",title:"",description:"",email:"",url:""}),[d,c]=n(!1),[u,i]=n("idle");return m(()=>{if(typeof window<"u"){const r=new URLSearchParams(window.location.search),o=r.get("url"),l=r.get("type");(o||l)&&a(s=>({...s,url:o?`${window.location.origin}${o}`:s.url,type:l||s.type}))}},[]),e("div",{className:"mx-auto max-w-2xl",children:e("form",{onSubmit:async r=>{r.preventDefault(),c(!0),i("idle");try{console.log("Submitting feedback:",t);const o=await fetch("/api/feedback",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...t,timestamp:new Date().toISOString()})});console.log("Response status:",o.status);const l=await o.json();console.log("Response data:",l),o.ok?(i("success"),a({type:"suggestion",title:"",description:"",email:"",url:""})):(console.error("Submission failed:",l),i("error"))}catch(o){console.error("Feedback submission error:",o),i("error")}finally{c(!1)}},className:"space-y-6",children:[e("div",{children:[e("label",{htmlFor:"type",className:"mb-2 block text-sm font-semibold text-gray-300",children:"What would you like to share?"}),e("select",{id:"type",value:t.type,onChange:r=>a({...t,type:r.target.value}),className:"w-full rounded-lg border border-gray-700 bg-gray-800 px-4 py-3 text-white focus:border-primary focus:outline-none focus:ring-2 focus:ring-primary/50",required:!0,children:[e("option",{value:"suggestion",children:"Suggestion"}),e("option",{value:"correction",children:"Correction"}),e("option",{value:"question",children:"Question"}),e("option",{value:"other",children:"Other"})]})]}),e("div",{children:[e("label",{htmlFor:"url",className:"mb-2 block text-sm font-semibold text-gray-300",children:"Page URL (optional)"}),e("input",{type:"url",id:"url",value:t.url,onChange:r=>a({...t,url:r.target.value}),placeholder:"https://devpath.sh/...",className:"w-full rounded-lg border border-gray-700 bg-gray-800 px-4 py-3 text-white placeholder-gray-500 focus:border-primary focus:outline-none focus:ring-2 focus:ring-primary/50"})]}),e("div",{children:[e("label",{htmlFor:"title",className:"mb-2 block text-sm font-semibold text-gray-300",children:["Title ",e("span",{className:"text-red-400",children:"*"})]}),e("input",{type:"text",id:"title",value:t.title,onChange:r=>a({...t,title:r.target.value}),placeholder:"Brief summary of your feedback",className:"w-full rounded-lg border border-gray-700 bg-gray-800 px-4 py-3 text-white placeholder-gray-500 focus:border-primary focus:outline-none focus:ring-2 focus:ring-primary/50",required:!0})]}),e("div",{children:[e("label",{htmlFor:"description",className:"mb-2 block text-sm font-semibold text-gray-300",children:["Description ",e("span",{className:"text-red-400",children:"*"})]}),e("textarea",{id:"description",value:t.description,onChange:r=>a({...t,description:r.target.value}),placeholder:"Please provide details about your feedback...",rows:6,className:"w-full rounded-lg border border-gray-700 bg-gray-800 px-4 py-3 text-white placeholder-gray-500 focus:border-primary focus:outline-none focus:ring-2 focus:ring-primary/50",required:!0})]}),e("div",{children:[e("label",{htmlFor:"email",className:"mb-2 block text-sm font-semibold text-gray-300",children:"Email (optional)"}),e("input",{type:"email",id:"email",value:t.email,onChange:r=>a({...t,email:r.target.value}),placeholder:"your.email@example.com",className:"w-full rounded-lg border border-gray-700 bg-gray-800 px-4 py-3 text-white placeholder-gray-500 focus:border-primary focus:outline-none focus:ring-2 focus:ring-primary/50"}),e("p",{className:"mt-1 text-xs text-gray-500",children:"Leave your email if you'd like us to follow up with you"})]}),e("div",{children:e("button",{type:"submit",disabled:d,className:"btn-primary w-full px-8 py-4 text-base font-semibold disabled:cursor-not-allowed disabled:opacity-50",children:d?"Submitting...":"Submit Feedback"})}),u==="success"&&e("div",{className:"rounded-lg border border-green-500/20 bg-green-500/10 p-4 text-center",children:[e("p",{className:"font-semibold text-green-400",children:"✓ Thank you for your feedback!"}),e("p",{className:"mt-1 text-sm text-gray-400",children:"We appreciate you taking the time to help us improve."})]}),u==="error"&&e("div",{className:"rounded-lg border border-red-500/20 bg-red-500/10 p-4 text-center",children:[e("p",{className:"font-semibold text-red-400",children:"✗ Something went wrong"}),e("p",{className:"mt-1 text-sm text-gray-400",children:"Please try again or contact us directly at feedback@devpath.sh"})]})]})})}export{h as default};
